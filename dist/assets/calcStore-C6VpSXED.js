import{C as n,D as t}from"./index-CgPm9Ux5.js";const g=n("CalcStore",{state:()=>({structure:null,overlay:null,category:null,tree:null,isLoading:!1,OverlayLoading:!1,data:null,list:null,item:null,filter:"*"}),getters:{isTreeReady(e){return!!(!e.isLoading&&e.tree!==null&&e.tree.children&&Object.keys(e.tree.children).length)},isDataReady(e){return!!(!e.isLoading&&e.data!==null&&Object.keys(e.data).length)},isStrReady(e){return!!(!e.isLoading&&e.structure!==null&&e.structure.child&&Object.keys(e.structure.child).length)},isCatReady(e){return!e.isLoading&&e.category!==null},isItemReady(e){return!e.isLoading&&e.item!==null},isOverlayReady(e){return!e.OverlayLoading&&e.overlay!==null},isHaveItems(e){return!!(e.category!==null&&e.category.blocks&&e.category.blocks[0]&&e.category.blocks[0].items&&Object.keys(e.category.blocks[0].items).length)},isHaveSubCat(e){return!!(e.category!==null&&e.category.children&&Object.keys(e.category.children).length)},filteredItems(e){var a,i;const r=((i=(a=e.category.blocks)==null?void 0:a[0])==null?void 0:i.items)||[];return e.filter==="*"?r:r.filter(l=>{var s;return(((s=l.properties)==null?void 0:s.workclass)||[]).some(o=>o.key===e.filter)})}},actions:{setFilter(e){this.filter=e},async fetchOverlayCategory(e){try{this.OverlayLoading=!0,this.overlay=(await t.get("blocks/categories/"+e)).data.data,this.OverlayLoading=!1}catch(r){console.error("Ошибка API:",r)}finally{this.OverlayLoading=!1}},async fetchStructure(e){try{this.isLoading=!0,this.structure=(await t.get("blocks/categories/structure/"+e)).data.data,this.isLoading=!1}catch(r){console.error("Ошибка API:",r)}finally{this.isLoading=!1}},async fetchBlockCategory(e){try{return this.isLoading=!0,this.category=(await t.get("blocks/categories/"+e)).data.data,this.isLoading=!1,!0}catch(r){console.error("Ошибка API:",r)}finally{this.isLoading=!1}},async fetchBlockItem(e){try{return this.isLoading=!0,this.item=(await t.get("blocks/items/"+e)).data.data,this.isLoading=!1,!0}catch(r){console.error("Ошибка API:",r)}finally{this.isLoading=!1}},async fetchTree(e){try{this.isLoading=!0,this.tree=(await t.get("/tree/"+e)).data,this.isLoading=!1}catch(r){console.error("Ошибка API:",r)}finally{this.isLoading=!1}},async fetchGroup(e){try{this.isLoading=!0,this.data=(await t.get("/group/offers/"+e)).data,this.isLoading=!1}catch(r){console.error("Ошибка API:",r)}finally{this.isLoading=!1}},async fetchCategory(e){try{const r=(await t.get("/dictionaries/"+e+"/categories/tree")).data;return console.log(r),r}catch(r){console.error("Ошибка API:",r)}},async fetchItem(e){try{this.isLoading=!0,this.item=(await t.get("/item/"+e)).data,this.isLoading=!1}catch(r){console.error("Ошибка API:",r)}},async fetchItemFromApi(e){return(await t.get("/item/"+e)).data},async fetchCategoryFromApi(e){try{return(await t.get("/cat/"+e)).data}catch(r){return console.error("Ошибка API:",r),null}}}});export{g as u};
